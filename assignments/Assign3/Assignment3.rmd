---
title: "Assignment3"
author: "DanielSmith"
date: "2025-09-25"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Purpose: The purpose of this assignment is to test concepts of data frame, logical subsetting, and file import.
## A
### Read this file into a data frame and write R code to answer the questions B,C,D. [10pts]

```{r,collapse = TRUE}
patients <- read.csv("/Users/cannon/Documents/___UHD_Docs/R_Programming_CS5301/CSVs/Assign3/patient.csv",sep=",",header=T)
head(patients)
```

## B
### At how many different time points, the person’s temperature (“Temp” in column 2) was taken. Ignore missing items. What are those time points? [10 points]

```{r}

# Filter for Tem
temp_data <- subset(patients, Parameter == "Temp" & !is.na(Value))

# Time and Value, rename that Temp
temp_results <- temp_data[, c("Time", "Value")]
colnames(temp_results)[2] <- "Temp"

# Number of time points
num_temp_timepoints <- nrow(temp_results)


num_temp_timepoints # Show Number of time points 
temp_results
```

## C
### At how many different time points, the person’s Heart rate (“HR” in column 2) was measured. Ignore missing items. What are those time points? [10 points]


```{r}

# Filter for HR
hr_data <- subset(patients, Parameter == "HR" & !is.na(Value))

# Keep only Time and Value
hr_results <- hr_data[, c("Time", "Value")]
colnames(hr_results)[2] <- "HR"

# Number of time points
num_hr_timepoints <- nrow(hr_results)

# Show summary
num_hr_timepoints
hr_results
```

## D
### Calculate the average temperature (“Temp” in column 2), and average Heart rate (“HR” in column 2) of the patient during the stay. Ignore missing items. [10points]

```{r}
temp_data <- subset(patients, Parameter == "Temp" & !is.na(Value))

# Filter HR values
hr_data <- subset(patients, Parameter == "HR" & !is.na(Value))

# Calculate averages
avg_temp <- mean(temp_data$Value)
avg_hr   <- mean(hr_data$Value)

# headers please
averages <- data.frame(
  Average_Temperature = avg_temp,
  Average_HeartRate   = avg_hr
)

# Show result dammit!
averages

```

## E
### In the first column of the data frame, replace the values by following the rules in the table below. After modifying, write the resulting data frame to a text file. [10points]

```{r}

# I don't like this one but it works...
patients$Time <- cut(
  patients$Time,
  breaks = c(0, 8.0, 16.0, 24.0, 32.0, 40.0, 48.0),
  labels = c(1, 2, 3, 4, 5, 6),
  include.lowest = TRUE,  # includes 0 caus I be damned
  right = TRUE            # intervals WTF
)

# Convert factor 
patients$Time <- as.numeric(as.character(patients$Time))

patients

# Write to a text file
write.table(patients,
            file = "patients_modified.txt",
            sep = "\t", row.names = FALSE, quote = FALSE)
```

# 2 
### You are given a csv file (outcomes.csv) that represents the outcomes of patients admitted to ICU. There are 4 columns
### A. RecordID: record id of a patient.
### B. Length of stay (days): number of days between the patient's admission to the ICU and the end of hospitalization. Missing values are indicated as NA.
### C. Survival (days): If the patient's death was recorded (in or out of hospital), then Survival is the number of days between ICU admission and death; otherwise, Survival is assigned the value -1.
### D. In-hospital death (0: survived during hospital stay, or 1: died-in-hospital)
## A.
### Number of patients who survived during their stay in hospital.

```{r}
outcomes_data <- read.csv("/Users/cannon/Documents/___UHD_Docs/R_Programming_CS5301/CSVs/Assign3/outcomes.csv",sep=",",header=T)
head(outcomes_data) 

# Survivors of hospital!!!  :-)
num_survived <- sum(outcomes_data$In.hospital_death == 0, na.rm = TRUE)

num_survived # Display Survivors of hospital!!! :-)
```

## B
### Number of patients who died during their stay in hospital.

```{r}

# Those who Did not survive... hospital :-(
died_in_hospital <- sum(outcomes_data$In.hospital_death == 1, na.rm = TRUE)

died_in_hospital # display Those who Did not survive... hospital :-(
```

## C
### Average of number of survival days among the patients who died-in-hospital.

```{r}

# average survival days for patients who died
avg_survival_days_died <- mean(
  outcomes_data$Length_of_stay[outcomes_data$In.hospital_death == 1],
  na.rm = TRUE
)

# Display average number days it took to die...
avg_survival_days_died

```

## D
### Among the patients who survived during their stay in hospital, how many of them stayed in the hospital for least 5 days

```{r}

# Lucky Ones... with at least 5 days stay
num_survivors_5days <- sum(outcomes_data$Survival == 1 & outcomes_data$Length_of_stay >= 5, na.rm = TRUE)

# days until they shotgunned a beer
num_survivors_5days

```

## E
### Among the patients who survived during their stay in hospital, how many of them stayed in the hospital less than 7 days

```{r}

# Lucky Ones... with stay < 7 days
num_survivors_lt7 <- sum(outcomes_data$Survival == 1 & outcomes_data$Length_of_stay < 7, na.rm = TRUE)

# Print result cause they need a drink after that shit
num_survivors_lt7
```
